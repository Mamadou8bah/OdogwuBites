<section class="space-y-4">
  <div class="rounded-2xl border border-white/10 bg-[#222]">
    <div class="flex flex-wrap items-center justify-between gap-3 p-4">
      <div>
        <h1 class="text-xl font-bold text-gray-100 italic">Payment History</h1>
        <p class="text-sm text-gray-400">
          {{ user?.role === 'admin' ? 'Viewing all system payments' : 'Viewing your transaction history' }}
        </p>
      </div>
    </div>

    <div class="overflow-x-auto">
      <table class="min-w-full border-separate border-spacing-0 text-left text-sm">
        <thead>
          <tr class="text-xs text-gray-400 uppercase tracking-wider">
            <th class="px-4 py-3 border-b border-white/5">Date</th>
            <th *ngIf="user?.role === 'admin'" class="px-4 py-3 border-b border-white/5">User ID</th>
            <th class="px-4 py-3 border-b border-white/5">Amount</th>
            <th class="px-4 py-3 border-b border-white/5">Method</th>
            <th class="px-4 py-3 border-b border-white/5">Status</th>
            <th class="px-4 py-3 border-b border-white/5">Notes</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngIf="isLoading">
            <td [attr.colspan]="user?.role === 'admin' ? 6 : 5" class="px-4 py-10 text-center">
              <div class="mx-auto loader2"></div>
              <div class="mt-3 text-sm text-gray-400">Loading transactions...</div>
            </td>
          </tr>

          <tr *ngIf="!isLoading && payments.length === 0">
            <td [attr.colspan]="user?.role === 'admin' ? 6 : 5" class="px-4 py-10 text-center text-gray-500">
              No payments found.
            </td>
          </tr>

          <tr *ngFor="let payment of payments" class="hover:bg-white/5 transition-colors">
            <td class="px-4 py-4 text-gray-300 border-b border-white/5">
              {{ payment.createdAt | date:'mediumDate' }}
            </td>
            <td *ngIf="user?.role === 'admin'" class="px-4 py-4 text-gray-400 border-b border-white/5 font-mono text-xs">
              {{ payment.userId }}
            </td>
            <td class="px-4 py-4 text-orange-400 font-bold border-b border-white/5">
              D{{ payment.amount | number:'1.2-2' }}
            </td>
            <td class="px-4 py-4 text-gray-300 border-b border-white/5">
              {{ payment.paymentMethod }}
            </td>
            <td class="px-4 py-4 border-b border-white/5">
              <span [class]="'px-2 py-1 rounded-full text-[10px] font-bold uppercase ' + getStatusClass(payment.paymentStatus)">
                {{ payment.paymentStatus }}
              </span>
            </td>
            <td class="px-4 py-4 text-gray-400 border-b border-white/5 max-w-xs truncate">
              {{ payment.notes || '-' }}
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</section>
 